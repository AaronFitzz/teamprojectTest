{"changed":true,"filter":false,"title":"processLogin.php","tooltip":"/grayscale/php/processLogin.php","value":"<?php\n/*\n    Firstly we include the config file that has the information to allow us to make a connection_aborted\n\t\tto the database.\n*/\n\ninclude 'config.php';\n\n/*\n\tFrom the javascript function inside the index.html file we sent an ajax call that passed some information\n\tvia a POST request to this PHP page. We can access the information by accessing the super global array $_POST[]\n\n\tThis allows us to create some variables with the information that the user sent.\n*/\n$user = $_POST['username'];\n$pass = $_POST['password'];\n\n/*\n\tThe next snippet of code is using the variables defined within the config.php file and making a secure connection\n\tusing mysqli to our newly created database. We use the @ symbol to suppress any errors when trying to make a\n\tconnection. If an error occurs we print out the details below and the thread of executing is stopped.\n\n*/\n@ $db = new mysqli(\"$hostname\", \"$username\", \"$password\", \"$dbname\");\nif (mysqli_connect_errno()) {\n\techo 'Error: Could not connect to database.  Please try again later.';\n\texit;\n}\n\n/*\n\tOnce we have a connection established to the database, we simply mconstruct suitable queries and run them against the\n\tcreated connection. Remember as discussed today you should test these queries in Workbench to determine if\n\tyou are getting the required results prior to trying to figure what is happening with PHP.\n*/\n$q1 = \"SELECT idusers FROM SocialLink.users where username='$login' && password='$pass'\";\n$result = $db->query($q1);\n\nif(!mysqli_fetch_row($result)){\n  echo \"Problems\";\n}\nelse{\n  echo \"Success\";\n}\n?>","undoManager":{"mark":-2,"position":25,"stack":[[{"start":{"row":0,"column":0},"end":{"row":43,"column":2},"action":"insert","lines":["<?php","/*","    Firstly we include the config file that has the information to allow us to make a connection_aborted","\t\tto the database.","*/","","include 'config.php';","","/*","\tFrom the javascript function inside the index.html file we sent an ajax call that passed some information","\tvia a POST request to this PHP page. We can access the information by accessing the super global array $_POST[]","","\tThis allows us to create some variables with the information that the user sent.","*/","$user = $_POST['username'];","$pass = $_POST['password'];","","/*","\tThe next snippet of code is using the variables defined within the config.php file and making a secure connection","\tusing mysqli to our newly created database. We use the @ symbol to suppress any errors when trying to make a","\tconnection. If an error occurs we print out the details below and the thread of executing is stopped.","","*/","@ $db = new mysqli(\"$hostname\", \"$username\", \"$password\", \"$dbname\");","if (mysqli_connect_errno()) {","\techo 'Error: Could not connect to database.  Please try again later.';","\texit;","}","","/*","\tOnce we have a connection established to the database, we simply mconstruct suitable queries and run them against the","\tcreated connection. Remember as discussed today you should test these queries in Workbench to determine if","\tyou are getting the required results prior to trying to figure what is happening with PHP.","*/","$q1 = \"SELECT idusers FROM testDB.users where username='$user' && password='$pass'\";","$result = $db->query($q1);","","if(!mysqli_fetch_row($result)){","  echo \"Problems\";","}","else{","  echo \"Success\";","}","?>"],"id":1}],[{"start":{"row":34,"column":32},"end":{"row":34,"column":33},"action":"remove","lines":["B"],"id":2}],[{"start":{"row":34,"column":31},"end":{"row":34,"column":32},"action":"remove","lines":["D"],"id":3}],[{"start":{"row":34,"column":30},"end":{"row":34,"column":31},"action":"remove","lines":["t"],"id":4}],[{"start":{"row":34,"column":29},"end":{"row":34,"column":30},"action":"remove","lines":["s"],"id":5}],[{"start":{"row":34,"column":28},"end":{"row":34,"column":29},"action":"remove","lines":["e"],"id":6}],[{"start":{"row":34,"column":27},"end":{"row":34,"column":28},"action":"remove","lines":["t"],"id":7}],[{"start":{"row":34,"column":27},"end":{"row":34,"column":28},"action":"insert","lines":["S"],"id":8}],[{"start":{"row":34,"column":28},"end":{"row":34,"column":29},"action":"insert","lines":["o"],"id":9}],[{"start":{"row":34,"column":29},"end":{"row":34,"column":30},"action":"insert","lines":["c"],"id":10}],[{"start":{"row":34,"column":30},"end":{"row":34,"column":31},"action":"insert","lines":["i"],"id":11}],[{"start":{"row":34,"column":31},"end":{"row":34,"column":32},"action":"insert","lines":["a"],"id":12}],[{"start":{"row":34,"column":32},"end":{"row":34,"column":33},"action":"insert","lines":["l"],"id":13}],[{"start":{"row":34,"column":33},"end":{"row":34,"column":34},"action":"insert","lines":["L"],"id":14}],[{"start":{"row":34,"column":34},"end":{"row":34,"column":35},"action":"insert","lines":["i"],"id":15}],[{"start":{"row":34,"column":35},"end":{"row":34,"column":36},"action":"insert","lines":["n"],"id":16}],[{"start":{"row":34,"column":36},"end":{"row":34,"column":37},"action":"insert","lines":["k"],"id":17}],[{"start":{"row":34,"column":64},"end":{"row":34,"column":65},"action":"remove","lines":["r"],"id":18}],[{"start":{"row":34,"column":63},"end":{"row":34,"column":64},"action":"remove","lines":["e"],"id":19}],[{"start":{"row":34,"column":62},"end":{"row":34,"column":63},"action":"remove","lines":["s"],"id":20}],[{"start":{"row":34,"column":61},"end":{"row":34,"column":62},"action":"remove","lines":["u"],"id":21}],[{"start":{"row":34,"column":61},"end":{"row":34,"column":62},"action":"insert","lines":["l"],"id":22}],[{"start":{"row":34,"column":62},"end":{"row":34,"column":63},"action":"insert","lines":["o"],"id":23}],[{"start":{"row":34,"column":63},"end":{"row":34,"column":64},"action":"insert","lines":["g"],"id":24}],[{"start":{"row":34,"column":64},"end":{"row":34,"column":65},"action":"insert","lines":["i"],"id":25}],[{"start":{"row":34,"column":65},"end":{"row":34,"column":66},"action":"insert","lines":["n"],"id":26}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":34,"column":66},"end":{"row":34,"column":66},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1478528496063}